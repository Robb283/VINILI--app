
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŽµ 5 dischi per anno</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; background: linear-gradient(to bottom, #2c3e50, #bdc3c7); }
    select, button { font-size: 1em; padding: 8px; margin: 10px; }
    .disco { margin-top: 30px; padding: 15px; border-bottom: 1px solid #ccc; }
    img { max-width: 200px; display: block; margin: 10px auto; }
  </style>
</head>
<body>
  <h1>ðŸŽµ 5 dischi casuali per anno</h1>
  <label for="yearSelect">Scegli un anno:</label>
  <select id="yearSelect"></select>
  <button onclick="pickFive()">ðŸŽ² Estrai 5 dischi</button>
  <div id="results"></div>

  <script>
    let collection = [];

    fetch("vinili_internazionale_with_covers.json")
      .then(res => res.json())
      .then(data => {
        collection = data;
        populateYears();
      });

    function populateYears() {
      const years = [...new Set(collection.map(d => d.Released).filter(y => y > 1900))].sort((a, b) => b - a);
      const select = document.getElementById("yearSelect");
      years.forEach(year => {
        const option = document.createElement("option");
        option.value = year;
        option.textContent = year;
        select.appendChild(option);
      });
    }

    function pickFive() {
      const selectedYear = document.getElementById("yearSelect").value;
      const filtered = collection.filter(d => d.Released == selectedYear);
      const shuffled = filtered.sort(() => 0.5 - Math.random());
      const selected = shuffled.slice(0, 5);
      const results = document.getElementById("results");
      results.innerHTML = `<h2>Anno: ${selectedYear}</h2>`;
      selected.forEach(disco => {
        results.innerHTML += `
          <div class="disco">
            <h3>${disco.Title}</h3>
            <h4>${disco.Artist}</h4>
            <p><strong>Label:</strong> ${disco.Label || '-'}<br>
               <strong>Formato:</strong> ${disco.Format || '-'}<br>
               <strong>Rating:</strong> ${disco.Rating || '-'}
            </p>
            ${disco.CoverURL ? `<img src="${disco.CoverURL}" alt="Copertina disco" />` : ''}
          </div>
        `;
      });
    }
  </script>
</body>
</html>
